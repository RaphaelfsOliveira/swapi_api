{% extends 'base.html' %}

{% block title %} Index {% endblock %}

{% block content %}

<div class="container">
    <div class="row">
        <div class="col s12">
            <br><br>
            <table id="myTable" style="width:100%"></table>

            <script>
                data = [{{ data| safe }}];
                data = data[0]['results'];

                var my_columns = [];

                $.each(data[0], function (key, value) {
                    var my_item = {};
                    my_item.data = key;
                    my_item.title = `<b>${key}</b>`;
                    my_columns.push(my_item);
                });

                $(document).ready(function () {

                    $('#myTable').DataTable({
                        autoWidth: false,
                        data: data,
                        columns: my_columns,
                        columnDefs: [
                            {
                                targets: ['_all'],
                                className: 'mdc-data-table__cell'
                            }
                        ]
                    });

                });
            </script>

        </div>
    </div>
</div>
{% endblock %}